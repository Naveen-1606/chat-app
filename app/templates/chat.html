{% extends "base.html" %}
{% block content %}
<div class="flex flex-col h-screen">
    <!-- Room Header -->
    <header class="bg-gray-800 text-white p-4">
        <h1 class="text-xl font-bold">Chat Room: {{ room.name }}</h1>
    </header>

    <!-- Messages Area -->
    <main id="message-list" 
        class="flex-1 overflow-y-auto p-4 space-y-2 bg-gray-100"
        hx-get="/chat/rooms/{{ room.id }}/messages"
        hx-trigger="load"
        hx-swap="innerHTML">
        <!-- Messages will be loaded here via HTMX -->
    </main>

    <!-- Message Form -->
    <form 
        hx-post="/chat/rooms/{{ room.id }}/messages"
        hx-target="#message-list"
        hx-swap="innerHTML"
        class="flex border-t border-gray-300">
        <input 
            type="text" 
            name="content" 
            placeholder="Type a message..."
            class="flex-1 p-3 border-none outline-none"
            required
        />
        <button 
            type="submit"
            class="bg-blue-500 text-white px-6 hover:bg-blue-600">
            Send
        </button>
    </form>
</div>

<script>
    // WebSocket for live updates
    const socket = new WebSocket(`ws://${window.location.host}/ws/chat/{{ room.id }}`);

    socket.onmessage = function(event) {
        document.getElementById("message-list").innerHTML = event.data;
    };
</script>
{% endblock %}
